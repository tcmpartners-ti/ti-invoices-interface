spring:
  autoconfigure.exclude:
    - org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration
    - org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration

  datasource:
    url: jdbc:h2:mem:db;DB_CLOSE_DELAY=-1
    username: sa
    password: sa
    driver-class-name: org.h2.Driver

  jpa:
    hibernate:
      ddl-auto: create-drop

bp:
  service:
    operational-gateway:
      template-id: ""
      business-banking-url: "https://bancaempresas.pichincha.com"
    payment-execution:
      bgl-account: ""

  api-gee:
    headers.device: "TradeInnovationInterface"

    credentials:
      app-id: ""
      api-key: ""
      api-secret: ""

    base-url: "http://127.0.0.1:80"
    services:
      business-banking:
        url: "${bp.api-gee.base-url}/business-banking/v1"
      payment-execution:
        url: "${bp.api-gee.base-url}/payment-execution/v1"
      operational-gateway:
        url: "${bp.api-gee.base-url}/operational-gateway/v2"
      corporate-loan:
        user: ""
        operation-token: ""
        url: "${bp.api-gee.base-url}/domain/corporate-loan/v1"

invoice:
  route:
    create:
      from: "direct:createInvoiceInTI"
      to: "activemq:queue:${ti.queue.pub.name}?replyTo=${ti.queue.reply.jndi}"

    create-bulk:
      from: "direct:bulkCreateInvoicesInTi"
      to: "activemq:queue:${ti.queue.pub.name}?replyTo=${ti.queue.reply.jndi}"

    event-listener:
      max-retries: 2
      retry-delay: 1 # ms

      from: "activemq:queue:${ti.queue.reply.name}"
      to: "direct:sendNotificationToApiGee"

    ack-event-listener:
      from: "direct:mockTiccQueue"
      to-finance: "direct:startFinanceFlow"
      to-settle:  "direct:startSettleFlow"

    finance:
      from: "direct:financeInvoiceInTI"
      to: "activemq:queue:${ti.queue.pub.name}?replyTo=${ti.queue.reply.jndi}"

    notification-invoice-creation:
      from: "direct:mockFtiQueue"
